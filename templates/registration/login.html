{% extends "base.html" %}
{% block content %}
<div class="auth-wrapper login-page">
    <div class="col-lg-5 col-md-7 col-11 mx-auto">
        <div class="card p-2 py-3 auth-card text-center">
            <h2 class="h5 mb-3">Acesso ao Sistema</h2>
            <form method="post" class="app-form text-start">
                {% csrf_token %}
                {{ form.non_field_errors }}
                <div class="mb-3">
                    <label class="form-label">Usuário</label>
                    <div class="form-control-wrap">
                        {{ form.username }}
                    </div>
                    {{ form.username.errors }}
                </div>
                <div class="mb-3">
                    <label class="form-label">Senha</label>
                    <div class="form-control-wrap password-wrap">
                        {{ form.password }}
                        <button class="password-toggle" type="button" aria-label="Mostrar senha" data-password-toggle>
                            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                <path d="M2 12s3.5-6 10-6 10 6 10 6-3.5 6-10 6-10-6-10-6z" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="1.5"></circle>
                            </svg>
                        </button>
                    </div>
                    {{ form.password.errors }}
                </div>
                <button type="submit" class="btn btn-primary w-100">Acessar</button>
                <div class="text-center mt-3">
                    <a class="btn btn-outline-secondary btn-sm" href="{% url 'cadastro' %}">Criar conta</a>
                </div>
            </form>
        </div>
        <div class="auth-hero text-center mt-3">
            <span class="pill text-uppercase small text-white-50 login-eyebrow">Acesso seguro</span>
            <p class="mb-0 mt-2">Gerencie clientes, veículos e ordens de serviços com rapidez e simplicidade.</p>
        </div>
    </div>
</div>
<script>
    (function() {
        const toggle = document.querySelector("[data-password-toggle]");
        if (!toggle) return;
        const input = document.getElementById("id_password");
        if (!input) return;
        toggle.addEventListener("click", () => {
            const isPassword = input.getAttribute("type") === "password";
            input.setAttribute("type", isPassword ? "text" : "password");
            toggle.setAttribute("aria-label", isPassword ? "Ocultar senha" : "Mostrar senha");
            toggle.classList.toggle("is-visible", isPassword);
        });
    })();
</script>
{% endblock %}
